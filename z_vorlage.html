<!DOCTYPE html>
<html lang="de" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vorlage</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>
</head>
<body>

<div class="bg-tertiary p-2 sticky-top">
    <div class="container-fluid d-flex align-items-center justify-content-between">
        <button class="btn btn-outline-secondary btn-sm"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#mobileSidebar"
                aria-controls="mobileSidebar">
            <i class="bi bi-list"></i> Menü
        </button>
    </div>
</div>

<div class="container-fluid mt-3">
    <div class="row">
        <main class="col-12">
            <div class="row justify-content-center">



            </div>
        </main>
    </div>
</div>

<div class="offcanvas offcanvas-start" tabindex="-1" id="mobileSidebar" aria-labelledby="mobileSidebarLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="mobileSidebarLabel">Navigation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Schließen"></button>
    </div>
    <div class="offcanvas-body">
        <ul class="list-unstyled m-0">
            <li class="nav-item mt-2"><a class="nav-link active" href="index.html">Start</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="1_kampagnenplanung.html">Kampagnenplanung</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="2_keyword_recherche.html">Keyword Recherche</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="3_anzeige_schreiben.html">Anzeigen schreiben</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="4_goals_tracken.html">Goals tracken</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="5_performance_prüfen.html">Performance prüfen</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="6_begriffe.html">Begriffe die man kennen sollte</a></li>
            <li class="nav-item mt-2"><a class="nav-link active" href="7_bonus.html">Bonus - Das aufgeräumte Konto</a></li>
        </ul>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(el=>{
        new bootstrap.Tooltip(el);
    });
</script>
<script>
    (() => {
        const wrap = document.getElementById('wk');
        if (!wrap) return;

        const status = document.getElementById('wkStatus');
        const btnDl = document.getElementById('dl');
        const btnReset = document.getElementById('reset');

        const checks = () => [...wrap.querySelectorAll('input[type=checkbox]')];

        function update() {
            const all = checks();
            const done = all.filter(c => c.checked).length;
            status.textContent = `${done}/${all.length} erledigt`;
        }

        function exportCSV() {
            const rows = [];
            const now = new Date().toISOString();
            wrap.querySelectorAll('.border').forEach(box => {
                const cat = box.querySelector('h6')?.innerText.trim() || '';
                box.querySelectorAll('.form-check').forEach(fc => {
                    const label = fc.querySelector('label')?.innerText.trim() || '';
                    const checked = fc.querySelector('input')?.checked ? 'erledigt' : 'offen';
                    rows.push({Kategorie: cat, Aufgabe: label, Status: checked, Zeitpunkt: now});
                });
            });

            const header = Object.keys(rows[0] || {Kategorie:'',Aufgabe:'',Status:'',Zeitpunkt:''});
            const lines = [header.join(';')].concat(rows.map(r => header.map(k => `"${String(r[k]).replace(/"/g,'""')}"`).join(';')));
            const blob = new Blob([lines.join('\r\n')], {type:'text/csv;charset=utf-8;'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = 'woechentliche_review.csv';
            document.body.appendChild(a); a.click(); a.remove();
            URL.revokeObjectURL(url);
        }

        wrap.addEventListener('change', update);
        btnDl?.addEventListener('click', exportCSV);
        btnReset?.addEventListener('click', () => {
            checks().forEach(c => c.checked = false);
            update();
        });
        update();
    })();
</script>

</body>
</html>
